{% extends 'base.html' %}
{% block js %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>
    // for now - posting entire form at once
    var join_btn = jQuery('#join_course_button');
    join_btn.click(function(){jQuery('#user-courses').load('/get_countries/');})

    var get_report = jQuery('#get_report_button');
    get_report.click(function(){jQuery('#reports').load('/get_countries/');})
</script>
{% endblock %}

{% block content %}
<ul class="nav nav-tabs">
    <li class="active"><a href="#user-modules" data-toggle="tab">Option B+</a></li>
    <li><a href="#user-courses" data-toggle="tab">Groups</a></li>
    {% if user_profile.profile_type == "IC" or user_profile.profile_type == "TE" %}<li><a href="#reports" data-toggle="tab">Reports</a></li> {% endif %}
    <li><a href="#user-profile" data-toggle="tab">Profile</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="user-modules">
    <b>Option B+</b>
	<p>This is a placeholder for one-paragraph description of the
	module. You can go through each module at your own
	pace. You can stop at any time and your progress will be
	saved. When you return, you will come back to this table of
	contents page where you can review what you have already
	learned, and proceed to complete the course. </p>
    
    
    
        <table width="100%" class="table table-striped">
        {% for um in user_modules %}
        <tr>
            <td><a href="{{um.get_absolute_url}}">
            {{um.name}}</a></td>
            <td> User Progress</td>
        </tr>
        {% empty %}
        <p>Tell User they should associate themselves with a group.</p>
        {% endfor %}

        {% for m in modules %}
        <tr>
            <a href="{{m.get_absolute_url}}">
            {{m.name}}</a>
        </tr>
        {% empty %}
        <p>No Modules Yet.</p>
        {% endfor %}
        </table>
    </div>






    <div class="tab-pane" id="user-courses">
        <div id="pane-content">
             <table width="100%" class="table table-striped table-condensed">
                  <b><p>Your Groups</p></b>
                  {% for uc in user_courses %}
                      <tr>
                      <td><a href="{{uc.get_absolute_url}}">{{uc.name}}</a></td>
                      </tr>
                  {% empty %}
                      <div name="instruction-div"><tr> There should be an instruction div of somesorts here to tell first timers what to do.</tr></div>
                      <tr><p>You have not joined any groups yet.</p>
                      <button id="join_course_button">Join Course</button>
                      <a href="/join_course/">Join Course</a></tr>
                  {% endfor %}
             </table><button data-toggle="modal" data-target="#basicModal" class="btn btn-sm btn-success" type="button"> Add Course </button></br>
        </div>
    </div>
    
    
    
    
    
    
    
    
   {% if user_profile.profile_type == "IC" %}
    <div class="tab-pane" id="reports">
        <div id="pane-content">
             <table width="100%" class="table table-striped table-condensed">
                  <b><p>View aggregate report for:</p></b>
				  <button id="get_report_button">View Report</button>
             </table><button data-toggle="modal" data-target="#basicModal" class="btn btn-sm btn-success" type="button"> Download Full Report </button></br>
        </div>
    </div>
   {% endif %}








{% if user_profile.profile_type == "TE" %}
    <div class="tab-pane" id="reports">
        <div id="pane-content">
             <table width="100%" class="table table-striped table-condensed">
                  <b><p>Your Groups</p></b>
                  {% for uc in user_courses %}
                      <tr>
                      <td><a href="{{uc.get_absolute_url}}">{{uc.name}}</a></td>
                      </tr>
                  {% empty %}
                      <div name="instruction-div"><tr> There should be an instruction div of somesorts here to tell first timers what to do.</tr></div>
                      <tr><p>You have not joined any groups yet.</p>
                      <button id="join_course_button">Join Course</button>
                      <a href="/join_course/">Join Course</a></tr>
                  {% endfor %}
             </table><button data-toggle="modal" data-target="#basicModal" class="btn btn-sm btn-success" type="button"> Add Course </button></br>
        </div>
    </div>
   {% endif %}







    <div class="tab-pane" id="user-profile">
        <table width="100%" class="table table-striped table-condensed">
        <tr>
            <td>
                <h2><a href="">User Profile Will Be displayed as Form</a></h2>
            </td>
        </tr>
        </table>


        <table width="100%" class="table table-striped table-condensed">
        <h4>Your Profile</hr>
        {{user_profile}}{{user_profile.user}}{{request.user.username}}{{user.first_name}}
        <form action="." method="post">
        <tr><td> First Name: <input type="text" name="first_name" value="{{user.first_name}}"> </td><td> Last Name: <input type="text" name="last_name" value="{{user.last_name}}"> </td></tr>
        <tr><td> Your username is: {{user.username}}</td></tr>
        <tr><td> Password: <input type="password" name="password1"> </td></tr>
        <tr><td> Confirm Password: <input type="password" name="password2"> </td></tr>
        <tr><td> <input type="checkbox" name="icap_affil" value="{{userprofile.icap_affil}}"> I am in an ICAP Program</td></tr>
        <tr><td> </td></tr>
        <tr><td> <input type="Submit" value="Submit"> </td></tr>
        
        </form>
        </table>
    </div>
    

    
    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
     <div class="modal-dialog">
         <div class="modal-content">
             <div class="modal-header">
             <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onClick=refresh_page();> x </button>
             <h4 class="modal-title" id="myModalLabel">Join Course</h4>
             </div>
             <div class="modal-body">
             <form id="create_course" action="/create_new_course/" method="post">{% csrf_token %}
             {{ form.as_p }}
             <input type="submit" value="Submit"/>
             </form>
             </div>
             <div class="modal-footer">
             
             <button id="refresh" type="button" class="btn btn-primary">Save changes</button>
         </div>
     </div>
   </div>
</div>
    
    
    
{% endblock%}
