{% extends 'base.html' %}
{% block js %}
<script>
    var join_btn = jQuery('#join_course_button');
    join_btn.click(function(){jQuery('#join_course').load('/get_countries/');});
    
    var add_btn = jQuery('#add_course_button');
    add_btn.click(function(){jQuery('#add_course_div').load('/add_course/');});
    
    jQuery('#report_form').load('/get_countries/');
    
    var profilebtn = jQuery('#user-profile-button');
    profilebtn.click(function(){jQuery('#new_profile').load('/update_profile/{{user_profile.pk}}/');});
    
    
    
    var onDelete = function()
    {
            jQuery.post(this.href, function(data)
            {   
                if (data.result == "ok")
                {
                    alert("Course deleted successfully");
                    location.reload();
                } else
                {
                    // handle error processed by server here
                    alert("smth goes wrong");
                }
            }).fail(function()
            {
                // handle unexpected error here
                alert("error");
            });
            return false;
    };//end of on delete

    jQuery(".delete_link").click(onDelete);
    
    

    
   

    
    
</script>
{% endblock %}

{% block content %}
<input type="hidden" value={{user.pk}}>

    {% block tabheaders %}
        {% include "dashboard/tabheadercontent.html" %}
    {% endblock%}

    {% block optionb %}
        {% include "dashboard/tab_optionb.html" %}
    {% endblock %}


    {% block groups %}
        {% include "dashboard/tab_groups.html" %}
    {% endblock %}
   
    
    
    
    {% block reports %}
        {% if user_profile.profile_type == "TE" %}
            {% include "dashboard/tab_teacher_reports.html" %}
        {% endif %}
        {% if user_profile.profile_type == "CA" %}
            {% include "dashboard/tab_ca_reports.html" %}
        {% endif %}
        {% if user_profile.profile_type == "IC" %}
            {% include "dashboard/tab_icap_reports.html" %}
        {% endif %}
    {% endblock %}




    <div class="tab-pane" id="user-profile">
    <button id="user-profile-button">Change Profile</button>
         <div id="originalprofile">
        <table width="100%" class="table table-striped table-condensed">
        <tr>
            <td>
                <h2><a href="">User Profile Will Be displayed as Form</a></h2>
            </td>
        </tr>
        </table>
 <div id="new_profile">
         
         </div> 

  
        </div>
    </div>
    

{% if user_profile.profile_type == "IC" %}
    <div class="tab-pane" id="pending-teachers">
        <div id="pane-content">
            <b><p>Pending Teachers</p></b>
			
            <table width="100%" class="table table-striped table-condensed">
            <tr><td>Teacher Name </td><td> School </td><td> Country </td></tr>
            {% for pt in pending_teachers %}
                <tr>
                      <td>{{pt.first_name}}{{pt.first_name}}</td><td>{{pt.school}}</td><td>{{pt.country}}</td>
                </tr>
                {% empty %}
                 <tr><b><p>No instructors have self registered yet.</p></b></tr>
                {% endfor %}
            </table>
           
            
        </div>
    </div>
{% endif %}












    
    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
     <div class="modal-dialog">
         <div class="modal-content">
             <div class="modal-header">
             <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onClick=refresh_page();> x </button>
             <h4 class="modal-title" id="myModalLabel">Join Course</h4>
             </div>
             <div class="modal-body">
             <form id="create_course" action="/create_new_course/" method="post">{% csrf_token %}
             {{ form.as_p }}
             <input type="submit" value="Submit"/>
             </form>
             </div>
             <div class="modal-footer">
             
             <button id="refresh" type="button" class="btn btn-primary">Save changes</button>
         </div>
     </div>
   </div>
</div>
    
    
{% endblock%}