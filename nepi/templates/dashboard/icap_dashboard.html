{% extends 'base.html' %}
{% block js %}
<script>
    var join_btn = jQuery('#join_course_button');
    join_btn.click(function(){jQuery('#join_course').load('/get_countries/');});
    
    var add_btn = jQuery('#add_course_button');
    add_btn.click(function(){jQuery('#add_course_div').load('/add_course/');});
    
    jQuery('#report_form').load('/get_countries/');
    
    var profilebtn = jQuery('#user-profile-button');
    profilebtn.click(function(){jQuery('#new_profile').load('/update_profile/{{user_profile.pk}}/');});
    
    
    
    var onDelete = function()
    {
            jQuery.post(this.href, function(data)
            {   
                if (data.result == "ok")
                {
                    alert("Course deleted successfully");
                    location.reload();
                } else
                {
                    // handle error processed by server here
                    alert("smth goes wrong");
                }
            }).fail(function()
            {
                // handle unexpected error here
                alert("error");
            });
            return false;
    };//end of on delete

    jQuery(".delete_link").click(onDelete);
    
    

    
   

    
    
</script>
{% endblock %}

{% block content %}
<input type="hidden" value={{user.pk}}>

    {% block tabheaders %}
        {% include "dashboard/tabheadercontent.html" %}
    {% endblock%}

    {% block optionb %}
        {% include "dashboard/tab_optionb.html" %}
    {% endblock %}


    {% block groups %}
        {% include "dashboard/tab_groups.html" %}
    {% endblock %}
   
    
    
    
    {% block reports %}
        {% if user_profile.profile_type == "TE" %}
            {% include "dashboard/tab_teacher_reports.html" %}
        {% endif %}
        {% if user_profile.profile_type == "CA" %}
            {% include "dashboard/tab_ca_reports.html" %}
        {% endif %}
        {% if user_profile.profile_type == "IC" %}
            {% include "dashboard/tab_icap_reports.html" %}
        {% endif %}
    {% endblock %}



    {% block profile %}
        {% include "dashboard/tab_profile.html" %}
    {% endblock %}
    
    {% block pending_teachers %}
        {% if user_profile.profile_type == "IC" %}
            {% include "dashboard/tab_pending_teachers.html" %}
        {% endif %}
    {% endblock %}












    
    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
     <div class="modal-dialog">
         <div class="modal-content">
             <div class="modal-header">
             <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onClick=refresh_page();> x </button>
             <h4 class="modal-title" id="myModalLabel">Join Course</h4>
             </div>
             <div class="modal-body">
             <form id="create_course" action="/create_new_course/" method="post">{% csrf_token %}
             {{ form.as_p }}
             <input type="submit" value="Submit"/>
             </form>
             </div>
             <div class="modal-footer">
             
             <button id="refresh" type="button" class="btn btn-primary">Save changes</button>
         </div>
     </div>
   </div>
</div>
    
    
{% endblock%}